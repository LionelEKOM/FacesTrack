<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Modal Sans Luminosit√©</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* CSS SANS LUMINOSIT√â POUR FORCER L'ACCESSIBILIT√â */

        /* Z-index √©lev√©s */
        .modal {
            z-index: 9999 !important;
        }

        .modal-dialog {
            z-index: 10000 !important;
        }

        .modal-content {
            z-index: 10001 !important;
            /* Supprimer les effets de luminosit√© */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5) !important;
            background: #ffffff !important;
        }

        /* Supprimer le backdrop lumineux */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5) !important;
            opacity: 1 !important;
        }

        /* FORCER l'accessibilit√© de TOUS les champs */
        .modal input,
        .modal select,
        .modal textarea,
        .modal .form-control,
        .modal .form-select {
            /* Styles de base sans luminosit√© */
            background-color: #ffffff !important;
            border: 2px solid #007bff !important;
            color: #000000 !important;
            font-size: 16px !important;
            padding: 10px !important;
            border-radius: 6px !important;

            /* FORCER l'interactivit√© */
            pointer-events: auto !important;
            user-select: auto !important;
            cursor: text !important;
            opacity: 1 !important;
            visibility: visible !important;
            position: relative !important;
            z-index: 10002 !important;

            /* Supprimer tous les effets de luminosit√© */
            box-shadow: none !important;
            text-shadow: none !important;
            filter: none !important;
            -webkit-filter: none !important;

            /* D√©sactiver tout ce qui pourrait bloquer */
            -webkit-user-select: auto !important;
            -moz-user-select: auto !important;
            -ms-user-select: auto !important;
            -webkit-touch-callout: auto !important;
        }

        /* Cursor sp√©cifique pour les selects */
        .modal select,
        .modal .form-select {
            cursor: pointer !important;
            background-color: #ffffff !important;
        }

        /* Focus sans luminosit√© excessive */
        .modal input:focus,
        .modal select:focus,
        .modal textarea:focus,
        .modal .form-control:focus,
        .modal .form-select:focus {
            border-color: #28a745 !important;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.3) !important;
            background-color: #ffffff !important;
            outline: none !important;
            /* Pas de transform scale pour √©viter la luminosit√© */
        }

        /* Hover sans luminosit√© */
        .modal input:hover,
        .modal select:hover,
        .modal textarea:hover,
        .modal .form-control:hover,
        .modal .form-select:hover {
            border-color: #0056b3 !important;
            background-color: #f8f9fa !important;
            /* Pas de transform pour √©viter la luminosit√© */
        }

        /* Labels sans luminosit√© */
        .modal .form-label {
            color: #000000 !important;
            font-weight: 600 !important;
            font-size: 14px !important;
            margin-bottom: 8px !important;
            display: block !important;
            /* Pas de text-shadow ou d'effets lumineux */
        }

        /* D√©sactiver TOUS les styles qui pourraient bloquer */
        .modal * {
            pointer-events: auto !important;
        }

        /* Supprimer les animations et transitions qui pourraient causer la luminosit√© */
        .modal,
        .modal * {
            animation: none !important;
            transition: none !important;
            -webkit-animation: none !important;
            -webkit-transition: none !important;
        }

        /* Styles pour les boutons sans luminosit√© */
        .btn {
            border-radius: 8px !important;
            font-weight: 500 !important;
            /* Supprimer les transitions qui causent la luminosit√© */
        }

        .btn:hover {
            /* Supprimer le hover qui cause la luminosit√© */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
        }

        .btn-primary {
            background-color: #007bff !important;
            border-color: #007bff !important;
            color: #ffffff !important;
        }

        .btn-primary:hover {
            background-color: #0056b3 !important;
            border-color: #0056b3 !important;
        }
    </style>
</head>

<body style="background-color: #f0f0f0; padding: 20px;">
    <div class="container">
        <h1 style="color: #007bff; text-align: center; margin-bottom: 30px;">
            üîß TEST MODAL SANS LUMINOSIT√â üîß
        </h1>

        <div class="alert alert-info" role="alert">
            <strong>üí° OBJECTIF :</strong> Ce fichier teste une modal Bootstrap SANS effets de luminosit√© pour forcer
            l'accessibilit√© des champs.
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Test Modal</h5>
                    </div>
                    <div class="card-body">
                        <p>Cliquez sur le bouton pour ouvrir la modal SANS luminosit√© :</p>
                        <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#testModal">
                            üîß OUVRIR MODAL SANS LUMINOSIT√â
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">Instructions</h5>
                    </div>
                    <div class="card-body">
                        <ol>
                            <li>Cliquez sur le bouton bleu</li>
                            <li>La modal s'ouvre SANS effets de luminosit√©</li>
                            <li>Les champs ont des bordures bleues simples</li>
                            <li>Essayez de cliquer dans les champs</li>
                            <li>Essayez de taper du texte</li>
                            <li>Regardez la console pour les diagnostics</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Test Sans Luminosit√© -->
    <div class="modal fade" id="testModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">üîß MODAL SANS LUMINOSIT√â</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <form>
                    <div class="modal-body">
                        <div class="alert alert-success">
                            <strong>‚úÖ SUCC√àS :</strong> Cette modal utilise des styles CSS SANS luminosit√© pour forcer
                            l'accessibilit√© !
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="testSelect" class="form-label">üîµ MENU D√âROULANT *</label>
                                <select class="form-select" id="testSelect" required>
                                    <option value="">S√©lectionner...</option>
                                    <option value="1">Option 1</option>
                                    <option value="2">Option 2</option>
                                    <option value="3">Option 3</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="testText" class="form-label">üîµ CHAMP TEXTE *</label>
                                <input type="text" class="form-control" id="testText" placeholder="Tapez ici..."
                                    required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="testDate" class="form-label">üîµ DATE *</label>
                                <input type="date" class="form-control" id="testDate" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="testTime" class="form-label">üîµ HEURE *</label>
                                <input type="time" class="form-control" id="testTime" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="testTextarea" class="form-label">üîµ ZONE DE TEXTE</label>
                            <textarea class="form-control" id="testTextarea" rows="4"
                                placeholder="Tapez votre message..."></textarea>
                        </div>

                        <div class="alert alert-warning">
                            <strong>üß™ TEST :</strong> Essayez de cliquer dans les champs et de taper du texte. Les
                            styles sans luminosit√© devraient permettre l'accessibilit√© !
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                        <button type="submit" class="btn btn-success btn-lg">üß™ TESTER</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üîß PAGE SANS LUMINOSIT√â CHARG√âE');

            // D√©finir la date d'aujourd'hui
            const today = new Date().toISOString().split('T')[0];
            const dateField = document.getElementById('testDate');
            if (dateField) {
                dateField.value = today;
                console.log('üìÖ Date d√©finie:', today);
            }

            // Test des champs lors de l'ouverture de la modal
            const testModal = document.getElementById('testModal');
            if (testModal) {
                testModal.addEventListener('shown.bs.modal', function () {
                    console.log('üîß MODAL SANS LUMINOSIT√â OUVERTE');
                    console.log('üß™ TEST DES CHAMPS SANS EFFETS DE LUMINOSIT√â...');
                    testFieldsSansLuminosite();
                });
            }
        });

        function testFieldsSansLuminosite() {
            console.log('üîß === TEST DES CHAMPS SANS LUMINOSIT√â ===');

            const fields = [
                { id: 'testSelect', type: 'select', name: 'Menu d√©roulant' },
                { id: 'testText', type: 'input', name: 'Champ texte' },
                { id: 'testDate', type: 'input', name: 'Date' },
                { id: 'testTime', type: 'input', name: 'Heure' },
                { id: 'testTextarea', type: 'textarea', name: 'Zone de texte' }
            ];

            fields.forEach(field => {
                const element = document.getElementById(field.id);
                if (element) {
                    console.log(`\nüîµ --- ${field.name} ---`);
                    console.log('Type:', element.type);
                    console.log('ID:', element.id);
                    console.log('Valeur:', element.value);
                    console.log('Disabled:', element.disabled);
                    console.log('Readonly:', element.readOnly);

                    // FOR√áAGE SANS LUMINOSIT√â
                    forceSansLuminosite(element, field.name);

                    // Test de focus
                    try {
                        element.focus();
                        console.log('‚úÖ Focus r√©ussi');
                    } catch (e) {
                        console.log('‚ùå Erreur de focus:', e.message);
                    }

                    // Test de saisie
                    if (field.type === 'input' || field.type === 'textarea') {
                        try {
                            const oldValue = element.value;
                            element.value = 'TEST_SANS_' + Date.now();
                            console.log('‚úÖ Saisie r√©ussie, nouvelle valeur:', element.value);
                            element.value = oldValue; // Restaurer
                        } catch (e) {
                            console.log('‚ùå Erreur de saisie:', e.message);
                        }
                    }

                    // Test de s√©lection
                    if (field.type === 'select') {
                        try {
                            const oldValue = element.value;
                            if (element.options.length > 1) {
                                element.value = element.options[1].value;
                                console.log('‚úÖ S√©lection r√©ussie, nouvelle valeur:', element.value);
                                element.value = oldValue; // Restaurer
                            }
                        } catch (e) {
                            console.log('‚ùå Erreur de s√©lection:', e.message);
                        }
                    }
                } else {
                    console.log(`‚ùå ${field.name}: NON TROUV√â`);
                }
            });
        }

        function forceSansLuminosite(element, fieldName) {
            console.log(`üîß FOR√áAGE SANS LUMINOSIT√â: ${fieldName}`);

            // Supprimer TOUS les attributs qui pourraient bloquer
            element.removeAttribute('disabled');
            element.removeAttribute('readonly');
            element.removeAttribute('aria-disabled');
            element.removeAttribute('aria-readonly');

            // Forcer les propri√©t√©s
            element.disabled = false;
            element.readOnly = false;

            // Supprimer les classes qui pourraient bloquer
            element.classList.remove('disabled', 'readonly', 'form-control-plaintext');

            // FORCER les styles CSS sans luminosit√©
            element.style.pointerEvents = 'auto';
            element.style.userSelect = 'auto';
            element.style.cursor = element.tagName === 'SELECT' ? 'pointer' : 'text';
            element.style.opacity = '1';
            element.style.visibility = 'visible';
            element.style.position = 'relative';
            element.style.zIndex = '10002';
            element.style.backgroundColor = '#ffffff';
            element.style.border = '2px solid #007bff';
            element.style.color = '#000000';
            element.style.fontSize = '16px';
            element.style.padding = '10px';
            element.style.borderRadius = '6px';

            // Supprimer TOUS les effets de luminosit√©
            element.style.boxShadow = 'none';
            element.style.textShadow = 'none';
            element.style.filter = 'none';
            element.style.webkitFilter = 'none';
            element.style.transform = 'none';
            element.style.transition = 'none';
            element.style.animation = 'none';

            // Supprimer TOUS les event listeners qui pourraient bloquer
            element.onclick = null;
            element.onmousedown = null;
            element.onmouseup = null;
            element.onmousemove = null;
            element.onkeydown = null;
            element.onkeyup = null;
            element.onkeypress = null;

            // Ajouter des event listeners simples
            element.addEventListener('click', function (e) {
                console.log(`üîß CLICK SANS LUMINOSIT√â sur ${fieldName}`);
                e.stopPropagation();
            }, true);

            element.addEventListener('focus', function (e) {
                console.log(`üîß FOCUS SANS LUMINOSIT√â sur ${fieldName}`);
                this.style.borderColor = '#28a745';
                this.style.boxShadow = '0 0 0 3px rgba(40, 167, 69, 0.3)';
            });

            element.addEventListener('blur', function (e) {
                console.log(`üîß BLUR SANS LUMINOSIT√â sur ${fieldName}`);
                this.style.borderColor = '#007bff';
                this.style.boxShadow = 'none';
            });

            // Pour les champs de texte, forcer la saisie
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.addEventListener('input', function (e) {
                    console.log(`üîß SAISIE SANS LUMINOSIT√â sur ${fieldName}:`, this.value);
                });

                element.addEventListener('keydown', function (e) {
                    console.log(`üîß TOUCHE SANS LUMINOSIT√â sur ${fieldName}:`, e.key);
                });
            }

            // Pour les selects, forcer la s√©lection
            if (element.tagName === 'SELECT') {
                element.addEventListener('change', function (e) {
                    console.log(`üîß CHANGEMENT SANS LUMINOSIT√â sur ${fieldName}:`, this.value);
                });
            }

            console.log(`üîß ACCESSIBILIT√â SANS LUMINOSIT√â FORC√âE pour ${fieldName}`);
        }

        // Fonction accessible depuis la console
        window.testFieldsSansLuminosite = testFieldsSansLuminosite;
        window.forceSansLuminosite = forceSansLuminosite;
    </script>
</body>

</html>
